---
layout: post
title:  "Express"
crawlertitle: "Express"
summary: "FullStack"
date:   2018-11-20 18:00 +0900
categories: posts
tags: 'FullStack'
author: codeMonkey
---

### Express

서버 세팅을 위해 Express를 설치
```javascript
    npm i -s express
```

#### Requst

```javascript
    const express = require('express')
    let app = express()

    const http = require('http')

    app.get('/', (req, res, next) => {
        res.send('hello world GET 요청')
    })
    app.get('/users', (req, res, next) => {
        res.send('/users GET 요청')
    })

    app.post('/', (req, res, next) => {
        res.send('hello world POST 요청')
    })
    app.post('/users', (req, res, next) => {
        res.send('/users POST 요청')
    })

    http.createServer(app).listen(3000, () => {
        console.log('Server on : 3000 Port')
    })
```
get/post 요청시 처리
http만 사용 할 때보다 좀 더 간결해 졌다.

```javascript
const express = require('express')
let app = express()

const bodyParser = require('body-parser') //body-parser 추가
const http = require('http')

app.use(bodyParser()) // use body-parser

app.get('/users/:id', (req, res, next) => {
    let params = req.params
    let querys = req.query

    console.log(params, querys)
    res.send('hello world GET 요청')
})

app.post('/', (req, res, next) => {
    let body = req.body

    console.log(body)
    res.send('hello world POST 요청')
})

http.createServer(app).listen(3000, () => {
    console.log('Server on : 3000 Port')
})
```
    /users/1 GET 요청시 터미널 콘솔에  
```
    { id : '1' }{} //params 값은 1, querys는 빈값
```
postman에서 Params 값을 Key/Value 로 입력 하고, 
요청하면 아래와 같이 나온다.
```
    { id : '1' }{ a : '1' }
```

#### Respone

- download()
- json()
- redirect()
- render()
- send()
- status()

```javascript
    const express = require('express')
    let app = express()
    const http = require('http')

    //send
    app.get('/send', (req, res, next) => {
        res.send('hello world') // html 형식으로 넘겨도 된다.
    })
    //download
    app.get('/download', (req, res, next) => {
        res.download('./test.txt')
    })
    //redirect
    app.get('/redirect', (req, res, next) => {
        res.send('/send')
    })
    //json
    app.status(201).get('/json', (req, res, next) => {
        res.json({
            msg : 'succes',
            code : 0
        })
    })

    http.createServer(app).listen(3000, () => {
        console.log('Server on : 3000 Port')
    })
```
render()는 express에서 제공하는 pug와 ejs 템플릿 엔진을 html로 렌더링 할 때 사용

#### router